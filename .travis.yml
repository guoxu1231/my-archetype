language: java

jdk:
  - oraclejdk8
os:
  - linux

sudo: required

install:
  - ./travis/install.sh

script:
  - mvn clean -pl archetype-helloworld test
  - mvn clean -pl archetype-microservice spring-boot:run &
  - sleep 20
  - mvn -pl archetype-microservice test

after_failure:
  - cat archetype-helloworld/target/surefire-reports/*.txt

cache:
  directories:
    - $HOME/.m2

services:
  - mysql
  - mongodb
  - redis-server